version: '3'
services:
  cockroach:
   network_mode: host
   image: cockroachdb/cockroach:v23.1.12
   ports:
     - '26257:26257'
     - '8080:8080'
   volumes:
     - roach-single-certs:/cockroach/certs
     - roach-single-data:/cockroach/cockroach-data
   environment:
     COCKROACH_DATABASE: cockroach
     COCKROACH_USER: cockroach
     COCKROACH_PASSWORD: cockroach
   command: start-single-node --http-addr=localhost:8080 --insecure

  # rabbitmq:
  #   network_mode: host
  #   image: rabbitmq:3-management
  #   volumes:
  #       - rabbitmq-data:/var/lib/rabbitmq
  #       - rabbitmq-log:/var/log/rabbitmq
  #   environment:
  #     RABBITMQ_DEFAULT_USER: guest
  #     RABBITMQ_DEFAULT_PASS: guest

  # cache:
  #   image: redis:latest
  #   ports:
  #     - '6379:6379'
  #   command: redis-server --save 20 1 --loglevel warning --requirepass guest
  #   volumes:
  #     - cache:/data



volumes:
  roach-single-certs:
  roach-single-data:
  rabbitmq-data:
  rabbitmq-log:
  cache: